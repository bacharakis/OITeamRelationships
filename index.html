<!DOCTYPE html>
<meta charset="utf-8">

<svg width="960" height="600"></svg>

<script src="https://d3js.org/d3.v4.min.js"></script>
<script>
var nodes = [
  { id:"Uniqueprojects", group:1, label:"Unique projects", level:1},
  { id:"AdFilteringandTrackingProtectionSupport", group:1, label:"Ad Filtering and Tracking Protection Support", level:1},
  { id:"BlindCodeReviews", group:1, label:"Blind Code Reviews", level:1},
  { id:"BugmarkSmartContracts", group:1, label:"Bugmark Smart Contracts", level:1},
  { id:"CommonVoice", group:1, label:"Common Voice", level:1},
  { id:"CoSSRoadmap", group:1, label:"CoSS Roadmap", level:1},
  { id:"CPGFramework", group:1, label:"CPG Framework", level:1},
  { id:"D_ICommunityHeartbeat", group:1, label:"D_I Community Heartbeat", level:1},
  { id:"D_IforContributorsandCommunities", group:1, label:"D_I for Contributors and Communities", level:1},
  { id:"DevRelPersonalizationandMonetization", group:1, label:"DevRel Personalization and Monetization", level:1},
  { id:"EventUtility", group:1, label:"Event Utility", level:1},
  { id:"FormsCoSSUtility", group:1, label:"Forms CoSS Utility", level:1},
  { id:"glTFimporterOpenInnovation", group:1, label:"glTF importer Open Innovation", level:1},
  { id:"IAM_AccessManagementProjectCharter", group:1, label:"IAM _ Access Management Project Charter", level:1},
  { id:"IAM_GeneralProjectCharter", group:1, label:"IAM _ General Project Charter", level:1},
  { id:"IAM_KTLOProjectCharter", group:1, label:"IAM _ KTLO Project Charter", level:1},
  { id:"MetricVision", group:1, label:"Metric Vision", level:1},
  { id:"MissionDrivenMozilliansCampaigns", group:1, label:"Mission Driven Mozillians Campaigns", level:1},
  { id:"MissionDrivenMozilliansGroupIdentities", group:1, label:"Mission Driven Mozillians Group Identities", level:1},
  { id:"MissionDrivenMozilliansResourcesDistribution", group:1, label:"Mission Driven Mozillians Resources Distribution", level:1},
  { id:"MissionDrivenMozilliansVolunteerLeadership", group:1, label:"MissionDriven Mozillians Volunteer Leadership", level:1},
  { id:"MITI_RealityRedrawn", group:1, label:"MITI _ Reality Redrawn", level:1},
  { id:"OpenInnovationStrategyProject", group:1, label:"Open Innovation Strategy Project", level:1},
  { id:"OSSNExperiments", group:1, label:"OSSN Experiments", level:1},
  { id:"OSSNNetworkHealthProjectCharter", group:1, label:"OSSN Network Health Project Charter", level:1},
  { id:"ProjectCharterOpenSourceDashboard", group:1, label:"Project Charter Open Source Dashboard", level:1},
  { id:"ProjectNebraska", group:1, label:"Project Nebraska", level:1},
  { id:"RebootChallengesWebsite", group:1, label:"Reboot Challenges Website", level:1},
  { id:"SuMoCommunityandPlatformStrategy", group:1, label:"SuMo Community and Platform Strategy", level:1},
  { id:"SUMOplaystore_ToolProjectCharter", group:1, label:"SUMO playstore _ Tool Project Charter", level:1},
  { id:"SupportBot", group:1, label:"Support Bot", level:1},
  { id:"TechnicalCrowdsourcingPilots", group:1, label:"Technical Crowdsourcing Pilots", level:1},
  { id:"WasmEcosystemAnalysis", group:1, label:"Wasm Ecosystem Analysis", level:1},
  { id:"WebcompatOpenInnovation", group:1, label:"Webcompat Open Innovation", level:1},
  { id:"WebMRContentEcosystemanalysis", group:1, label:"WebMR Content Ecosystem analysis", level:1},
  { id:"WebsiteBuilderUtilityCoSS", group:1, label:"Website Builder Utility CoSS", level:1},
  { id:"WebVRExperienceChallenge", group:1, label:"WebVR Experience Challenge", level:1},
  { id:"Don", group:2, label:"Don", level:2},
  { id:"Henrik", group:2, label:"Henrik", level:2},
  { id:"Katharina", group:2, label:"Katharina", level:2},
  { id:"Patrick", group:2, label:"Patrick", level:2},
  { id:"Emma", group:2, label:"Emma", level:2},
  { id:"Megan", group:2, label:"Megan", level:2},
  { id:"Rina", group:2, label:"Rina", level:2},
  { id:"Productmanager", group:2, label:"Product manager", level:2},
  { id:"MalvikaRao", group:2, label:"Malvika Rao", level:2},
  { id:"RichBodo", group:2, label:"Rich Bodo", level:2},
  { id:"Henrick", group:2, label:"Henrick", level:2},
  { id:"Susy", group:2, label:"Susy", level:2},
  { id:"AndyLeak", group:2, label:"Andy Leak", level:2},
  { id:"George", group:2, label:"George", level:2},
  { id:"Lindsay", group:2, label:"Lindsay", level:2},
  { id:"UIcontractor", group:2, label:"UI contractor", level:2},
  { id:"Michael", group:2, label:"Michael", level:2},
  { id:"Arielle", group:2, label:"Arielle", level:2},
  { id:"ServiceDesign", group:2, label:"Service Design", level:2},
  { id:"Parsys", group:2, label:"Parsys", level:2},
  { id:"Kate", group:2, label:"Kate", level:2},
  { id:"Lucy", group:2, label:"Lucy", level:2},
  { id:"HeadcountonEmmaHumphriesteamforGithubCommunityManager", group:2, label:"Headcount on Emma Humphries team for Github Community Manager", level:2},
  { id:"OutreachyIntern", group:2, label:"Outreachy Intern", level:2},
  { id:"Ruben", group:2, label:"Ruben", level:2},
  { id:"D&Ioversight", group:2, label:"D&I oversight", level:2},
  { id:"DesignOversight", group:2, label:"Design Oversight", level:2},
  { id:"QAtime", group:2, label:"QA time", level:2},
  { id:"D&I", group:2, label:"D&I", level:2},
  { id:"", group:2, label:"", level:2},
  { id:"Rosana", group:2, label:"Rosana", level:2},
  { id:"Alex", group:2, label:"Alex", level:2},
  { id:"Eugene", group:2, label:"Eugene", level:2},
  { id:"Designer", group:2, label:"Designer", level:2},
  { id:"Developers", group:2, label:"Developers", level:2},
  { id:"Christos", group:2, label:"Christos", level:2},
  { id:"Hermina", group:2, label:"Hermina", level:2},
  { id:"Rubén", group:2, label:"Rubén", level:2},
  { id:"ParSys", group:2, label:"ParSys", level:2},
  { id:"Konstantina", group:2, label:"Konstantina", level:2},
  { id:"CommunityManagementFeedback", group:2, label:"Community Management Feedback", level:2},
  { id:"D&IOversight", group:2, label:"D&I Oversight", level:2},
  { id:"Pierros", group:2, label:"Pierros", level:2},
  { id:"Dees", group:2, label:"Dees", level:2},
  { id:"Florian", group:2, label:"Florian", level:2}
]

var links = [
  { target:"AdFilteringandTrackingProtectionSupport", source:"Don", strength:0.55},
  { target:"AdFilteringandTrackingProtectionSupport", source:"Henrik", strength:0.01},
  { target:"AdFilteringandTrackingProtectionSupport", source:"Katharina", strength:0.50},
  { target:"AdFilteringandTrackingProtectionSupport", source:"Patrick", strength:0.50},
  { target:"BlindCodeReviews", source:"Don", strength:0.15},
  { target:"BlindCodeReviews", source:"Emma", strength:0.25},
  { target:"BlindCodeReviews", source:"Megan", strength:0.01},
  { target:"BlindCodeReviews", source:"Rina", strength:0.01},
  { target:"BlindCodeReviews", source:"Productmanager", strength:0.50},
  { target:"BugmarkSmartContracts", source:"Don", strength:0.40},
  { target:"BugmarkSmartContracts", source:"MalvikaRao", strength:0.01},
  { target:"BugmarkSmartContracts", source:"RichBodo", strength:0.01},
  { target:"BugmarkSmartContracts", source:"Henrick", strength:0.50},
  { target:"BugmarkSmartContracts", source:"Patrick", strength:0.01},
  { target:"BugmarkSmartContracts", source:"Rina", strength:0.15},
  { target:"BugmarkSmartContracts", source:"Megan", strength:0.25},
  { target:"BugmarkSmartContracts", source:"Susy", strength:0.35},
  { target:"BugmarkSmartContracts", source:"AndyLeak", strength:0.01},
  { target:"CommonVoice", source:"George", strength:0.15},
  { target:"CommonVoice", source:"Lindsay", strength:0.20},
  { target:"CommonVoice", source:"Rina", strength:0.20},
  { target:"CommonVoice", source:"UIcontractor", strength:0.25},
  { target:"CommonVoice", source:"Megan", strength:0.50},
  { target:"CommonVoice", source:"Michael", strength:1.00},
  { target:"CommonVoice", source:"Susy", strength:0.01},
  { target:"CoSSRoadmap", source:"Arielle", strength:0.01},
  { target:"CoSSRoadmap", source:"ServiceDesign", strength:0.05},
  { target:"CoSSRoadmap", source:"Parsys", strength:0.10},
  { target:"CPGFramework", source:"George", strength:0.10},
  { target:"CPGFramework", source:"Emma", strength:0.15},
  { target:"CPGFramework", source:"Kate", strength:0.95},
  { target:"CPGFramework", source:"Lucy", strength:0.01},
  { target:"D_ICommunityHeartbeat", source:"Kate", strength:0.05},
  { target:"D_ICommunityHeartbeat", source:"George", strength:0.10},
  { target:"D_ICommunityHeartbeat", source:"ServiceDesign", strength:0.10},
  { target:"D_ICommunityHeartbeat", source:"Parsys", strength:0.20},
  { target:"D_ICommunityHeartbeat", source:"Emma", strength:0.50},
  { target:"D_ICommunityHeartbeat", source:"HeadcountonEmmaHumphriesteamforGithubCommunityManager", strength:0.01},
  { target:"D_ICommunityHeartbeat", source:"Lucy", strength:0.01},
  { target:"D_ICommunityHeartbeat", source:"OutreachyIntern", strength:1.00},
  { target:"D_ICommunityHeartbeat", source:"Ruben", strength:0.01},
  { target:"D_IforContributorsandCommunities", source:"Kate", strength:0.01},
  { target:"D_IforContributorsandCommunities", source:"ServiceDesign", strength:0.01},
  { target:"DevRelPersonalizationandMonetization", source:"George", strength:0.10},
  { target:"EventUtility", source:"D&Ioversight", strength:0.05},
  { target:"EventUtility", source:"DesignOversight", strength:0.05},
  { target:"EventUtility", source:"QAtime", strength:0.20},
  { target:"EventUtility", source:"Arielle", strength:0.75},
  { target:"FormsCoSSUtility", source:"D&I", strength:0.01},
  { target:"FormsCoSSUtility", source:"Parsys", strength:0.01},
  { target:"FormsCoSSUtility", source:"ServiceDesign", strength:0.01},
  { target:"MetricVision", source:"Susy", strength:0.35},
  { target:"MetricVision", source:"Patrick", strength:0.01},
  { target:"MITI_RealityRedrawn", source:"Katharina", strength:0.10},
  { target:"MITI_RealityRedrawn", source:"Lindsay", strength:0.35},
  { target:"MITI_RealityRedrawn", source:"Rosana", strength:0.01},
  { target:"OpenInnovationStrategyProject", source:"Emma", strength:0.01},
  { target:"OpenInnovationStrategyProject", source:"Alex", strength:0.10},
  { target:"OpenInnovationStrategyProject", source:"Rina", strength:0.20},
  { target:"OpenInnovationStrategyProject", source:"Patrick", strength:0.25},
  { target:"OpenInnovationStrategyProject", source:"Eugene", strength:0.30},
  { target:"OpenInnovationStrategyProject", source:"Susy", strength:0.35},
  { target:"OpenInnovationStrategyProject", source:"Lucy", strength:0.01},
  { target:"OSSNExperiments", source:"Don", strength:0.01},
  { target:"OSSNExperiments", source:"George", strength:0.10},
  { target:"OSSNExperiments", source:"Rina", strength:0.10},
  { target:"OSSNExperiments", source:"Designer", strength:0.50},
  { target:"OSSNExperiments", source:"Developers", strength:0.50},
  { target:"OSSNExperiments", source:"Christos", strength:0.75},
  { target:"OSSNNetworkHealthProjectCharter", source:"Lucy", strength:0.10},
  { target:"OSSNNetworkHealthProjectCharter", source:"Christos", strength:0.25},
  { target:"ProjectNebraska", source:"Don", strength:0.01},
  { target:"ProjectNebraska", source:"Emma", strength:0.01},
  { target:"ProjectNebraska", source:"George", strength:0.10},
  { target:"ProjectNebraska", source:"Henrik", strength:0.01},
  { target:"ProjectNebraska", source:"Hermina", strength:0.01},
  { target:"ProjectNebraska", source:"Lucy", strength:0.01},
  { target:"ProjectNebraska", source:"Patrick", strength:0.01},
  { target:"ProjectNebraska", source:"Rina", strength:0.01},
  { target:"ProjectNebraska", source:"Rubén", strength:0.01},
  { target:"ProjectNebraska", source:"Susy", strength:0.01},
  { target:"RebootChallengesWebsite", source:"Eugene", strength:0.25},
  { target:"RebootChallengesWebsite", source:"ParSys", strength:0.01},
  { target:"RebootChallengesWebsite", source:"ServiceDesign", strength:0.01},
  { target:"RebootChallengesWebsite", source:"Rosana", strength:0.25},
  { target:"SuMoCommunityandPlatformStrategy", source:"Arielle", strength:0.05},
  { target:"SuMoCommunityandPlatformStrategy", source:"Lucy", strength:0.10},
  { target:"SuMoCommunityandPlatformStrategy", source:"George", strength:0.25},
  { target:"SuMoCommunityandPlatformStrategy", source:"Konstantina", strength:0.25},
  { target:"SuMoCommunityandPlatformStrategy", source:"Rina", strength:0.01},
  { target:"SupportBot", source:"CommunityManagementFeedback", strength:0.01},
  { target:"SupportBot", source:"D&IOversight", strength:0.01},
  { target:"SupportBot", source:"ParSys", strength:0.01},
  { target:"SupportBot", source:"ServiceDesign", strength:0.01},
  { target:"TechnicalCrowdsourcingPilots", source:"George", strength:0.15},
  { target:"TechnicalCrowdsourcingPilots", source:"Eugene", strength:1.00},
  { target:"WasmEcosystemAnalysis", source:"Patrick", strength:0.10},
  { target:"WasmEcosystemAnalysis", source:"Pierros", strength:0.60},
  { target:"WebcompatOpenInnovation", source:"George", strength:0.12},
  { target:"WebcompatOpenInnovation", source:"Rina", strength:0.20},
  { target:"WebcompatOpenInnovation", source:"Rosana", strength:0.50},
  { target:"WebMRContentEcosystemanalysis", source:"Patrick", strength:0.05},
  { target:"WebMRContentEcosystemanalysis", source:"Pierros", strength:0.10},
  { target:"WebMRContentEcosystemanalysis", source:"Dees", strength:0.40},
  { target:"WebsiteBuilderUtilityCoSS", source:"Megan", strength:0.25},
  { target:"WebsiteBuilderUtilityCoSS", source:"Arielle", strength:1.00},
  { target:"WebsiteBuilderUtilityCoSS", source:"Florian", strength:1.00},
  { target:"WebVRExperienceChallenge", source:"Dees", strength:0.01},
  { target:"WebVRExperienceChallenge", source:"Lindsay", strength:0.10},
  { target:"WebVRExperienceChallenge", source:"Patrick", strength:0.01},
  { target:"WebVRExperienceChallenge", source:"Pierros", strength:0.01},
  { target:"WebVRExperienceChallenge", source:"Rosana", strength:0.50}
]

function getNeighbors(node) {
  return links.reduce(function (neighbors, link) {
      if (link.target.id === node.id) {
        neighbors.push(link.source.id)
      } else if (link.source.id === node.id) {
        neighbors.push(link.target.id)
      }
      return neighbors
    },
    [node.id]
  )
}

function isNeighborLink(node, link) {
  return link.target.id === node.id || link.source.id === node.id
}


function getNodeColor(node, neighbors) {
  if (Array.isArray(neighbors) && neighbors.indexOf(node.id) > -1) {
    return node.level === 1 ? 'blue' : 'green'
  }

  return node.level === 1 ? 'red' : 'gray'
}


function getLinkColor(node, link) {
  return isNeighborLink(node, link) ? 'green' : '#E5E5E5'
}

function getTextColor(node, neighbors) {
  return Array.isArray(neighbors) && neighbors.indexOf(node.id) > -1 ? 'green' : 'black'
}

var width = window.innerWidth
var height = window.innerHeight

var svg = d3.select('svg')
svg.attr('width', width).attr('height', height)

// simulation setup with all forces
var linkForce = d3
  .forceLink()
  .id(function (link) { return link.id })
  .strength(function (link) { return link.strength })

var simulation = d3
  .forceSimulation()
  .force('link', linkForce)
  .force('charge', d3.forceManyBody().strength(-120))
  .force('center', d3.forceCenter(width / 2, height / 2))

var dragDrop = d3.drag().on('start', function (node) {
  node.fx = node.x
  node.fy = node.y
}).on('drag', function (node) {
  simulation.alphaTarget(0.7).restart()
  node.fx = d3.event.x
  node.fy = d3.event.y
}).on('end', function (node) {
  if (!d3.event.active) {
    simulation.alphaTarget(0)
  }
  node.fx = null
  node.fy = null
})

function selectNode(selectedNode) {
  var neighbors = getNeighbors(selectedNode)

  // we modify the styles to highlight selected nodes
  nodeElements.attr('fill', function (node) { return getNodeColor(node, neighbors) })
  textElements.attr('fill', function (node) { return getTextColor(node, neighbors) })
  linkElements.attr('stroke', function (link) { return getLinkColor(selectedNode, link) })
}

var linkElements = svg.append("g")
  .attr("class", "links")
  .selectAll("line")
  .data(links)
  .enter().append("line")
    .attr("stroke-width", 1)
	  .attr("stroke", "rgba(50, 50, 50, 0.2)")

var nodeElements = svg.append("g")
  .attr("class", "nodes")
  .selectAll("circle")
  .data(nodes)
  .enter().append("circle")
    .attr("r", 10)
    .attr("fill", getNodeColor)
    .call(dragDrop)
    .on('click', selectNode)

var textElements = svg.append("g")
  .attr("class", "texts")
  .selectAll("text")
  .data(nodes)
  .enter().append("text")
    .text(function (node) { return  node.label })
	  .attr("font-size", 15)
	  .attr("dx", 15)
    .attr("dy", 4)

simulation.nodes(nodes).on('tick', () => {
  nodeElements
    .attr('cx', function (node) { return node.x })
    .attr('cy', function (node) { return node.y })
  textElements
    .attr('x', function (node) { return node.x })
    .attr('y', function (node) { return node.y })
  linkElements
    .attr('x1', function (link) { return link.source.x })
    .attr('y1', function (link) { return link.source.y })
    .attr('x2', function (link) { return link.target.x })
    .attr('y2', function (link) { return link.target.y })
})

simulation.force("link").links(links)
</script>

